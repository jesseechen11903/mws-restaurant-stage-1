!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"fetchRestaurants",value:function(t){var n=new XMLHttpRequest;n.open("GET",e.DATABASE_URL),n.onload=function(){if(200===n.status){var e=JSON.parse(n.responseText).restaurants;t(null,e)}else{var r="Request failed. Returned status of "+n.status;t(r,null)}},n.send()}},{key:"fetchRestaurantById",value:function(t,n){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var a=r.find(function(e){return e.id==t});a?n(null,a):n("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(t,n){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var a=r.filter(function(e){return e.cuisine_type==t});n(null,a)}})}},{key:"fetchRestaurantByNeighborhood",value:function(t,n){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var a=r.filter(function(e){return e.neighborhood==t});n(null,a)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(t,n,r){e.fetchRestaurants(function(e,a){if(e)r(e,null);else{var u=a;"all"!=t&&(u=u.filter(function(e){return e.cuisine_type==t})),"all"!=n&&(u=u.filter(function(e){return e.neighborhood==n})),r(null,u)}})}},{key:"fetchNeighborhoods",value:function(t){e.fetchRestaurants(function(e,n){if(e)t(e,null);else{var r=n.map(function(e,t){return n[t].neighborhood}),a=r.filter(function(e,t){return r.indexOf(e)==t});t(null,a)}})}},{key:"fetchCuisines",value:function(t){e.fetchRestaurants(function(e,n){if(e)t(e,null);else{var r=n.map(function(e,t){return n[t].cuisine_type}),a=r.filter(function(e,t){return r.indexOf(e)==t});t(null,a)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"/img/"+e.photograph}},{key:"mapMarkerForRestaurant",value:function(t,n){return new google.maps.Marker({position:t.latlng,title:t.name,url:e.urlForRestaurant(t),map:n,animation:google.maps.Animation.DROP})}},{key:"DATABASE_URL",get:function(){return"http://localhost:8887/data/restaurants.json"}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParameterByName=t.fillBreadcrumb=t.createReviewHTML=t.fillReviewsHTML=t.fillRestaurantHoursHTML=t.fillRestaurantHTML=t.getImageSource=t.fetchRestaurantFromURL=void 0;var r,a=n(0),u=(r=a)&&r.__esModule?r:{default:r};t.fetchRestaurantFromURL=function(e){if(self.restaurant)e(null,self.restaurant);else{var t=f("id");t?u.default.fetchRestaurantById(t,function(t,n){self.restaurant=n,n?(l(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}};var i=t.getImageSource=function(e,t){var n=e;return e&&t&&(n=e.substring(0,e.lastIndexOf("."))+"-"+t+e.substring(e.lastIndexOf("."))),n},l=t.fillRestaurantHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img";var n=u.default.imageUrlForRestaurant(e),r=i(n,"sm")+" 400w,"+i(n,"md")+" 600w,"+i(n,"lg")+" 1440w";t.setAttribute("srcset",r),t.src=i(n,"lg"),t.setAttribute("alt",e.name);var a=document.getElementById("restaurant-pic").getElementsByTagName("source");a[0].setAttribute("srcset",i(n,"lg")+" 1x,"+i(n,"lg_2x")+" 2x"),a[1].setAttribute("srcset",i(n,"sm")+" 1x,"+i(n,"sm_2x")+" 2x"),a[2].setAttribute("srcset",i(n,"md")+" 1x,"+i(n,"md_2x")+" 2x"),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&o(),s()},o=t.fillRestaurantHoursHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var u=document.createElement("td");u.innerHTML=e[n],r.appendChild(u),t.appendChild(r)}},s=t.fillReviewsHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(c(e))}),t.appendChild(a)},c=t.createReviewHTML=function(e){var t=document.createElement("li");t.setAttribute("role","listitem"),t.setAttribute("tabindex","0");var n=document.createElement("p");n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("p");r.innerHTML=e.date,t.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,t.appendChild(a);var u=document.createElement("p");return u.innerHTML=e.comments,t.appendChild(u),t},f=(t.fillBreadcrumb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.setAttribute("class","restaurant-selected"),n.innerHTML=e.name,t.appendChild(n)},t.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null})}]);